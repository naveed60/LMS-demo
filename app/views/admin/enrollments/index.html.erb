<%= turbo_frame_tag 'main' do %>
  <%= stylesheet_link_tag "enrollment", "data-turbo-track": "reload" %>

  <div style="text-align:center; margin-top:1rem;">
    <h1 style="font-weight:700; color:#343a40;">Enrollments</h1>

    <p>
      <%= link_to "Add Enrollment", new_admin_enrollment_path,
          class: "btn btn-primary",
          style: "background-color:#6f42c1; border-color:#6f42c1;
                  color:white; padding:0.6rem 2rem; border-radius:50rem;
                  font-weight:600; border:none;" %>
    </p>
  </div>

  <div class="table-responsive" style="padding:1rem; max-width:1100px; margin:auto;">
    <table class="table table-hover table-bordered align-middle shadow-sm"
           style="border-radius:0.75rem; overflow:hidden; background:white; width:100%;">
      <thead style="background:linear-gradient(90deg, #6f42c1, #8e63d4); color:white;">
        <tr>
          <th>Student</th>
          <th>Teacher</th>
          <th>Course</th>
          <th>Section</th>
          <th>Semester</th>
          <th>Semester No</th>
          <th>Grade</th>
          <th style="text-align:center;">Edit</th>
          <th style="text-align:center;">Delete</th>
        </tr>
      </thead>
      <tbody>
        <% @enrollments.each do |e| %>
          <tr>
            <td style="font-weight:500;"><%= e.student.name %></td>
            <td><%= e.section.teacher.name %></td>
            <td><%= e.section.course.name %></td>
            <td><%= e.section.name %></td>
            <td><%= e.semester.semester_type %></td>
            <td><%= e.semester.semester_number %></td>
            <td>
              <% if e.grade.letter == "Pending" %>
                <%= link_to e.grade.letter, edit_admin_enrollment_path(e),
                    class: "text-warning fw-bold text-decoration-none" %>
              <% else %>
                <span class="fw-semibold"><%= e.grade.letter %></span>
              <% end %>
            </td>
            <td style="text-align:center;">
              <%= link_to 'Edit', edit_admin_enrollment_path(e),
                  class: "btn btn-sm btn-outline-info",
                  style: "border-radius:50rem; padding:0.3rem 1rem; font-weight:500;" %>
            </td>
            <td style="text-align:center;">
              <%= link_to "Delete", admin_enrollment_path(e),
                  data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
                  class: "btn btn-sm btn-outline-danger",
                  style: "border-radius:50rem; padding:0.3rem 1rem; font-weight:500;" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% end %>
